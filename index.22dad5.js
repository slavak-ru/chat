!function(t){var e={};function n(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(r,s,function(e){return t[e]}.bind(null,s));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="./",n(n.s=42)}([function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(30)("wks"),s=n(31),i=n(0).Symbol,o="function"==typeof i;(t.exports=function(t){return r[t]||(r[t]=o&&i[t]||(o?i:s)("Symbol."+t))}).store=r},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty;function s(t,e){return Array.isArray(t)?function(t,e){for(var n,r="",i="",o=Array.isArray(e),a=0;a<t.length;a++)(n=s(t[a]))&&(o&&e[a]&&(n=u(n)),r=r+i+n,i=" ");return r}(t,e):t&&"object"==typeof t?function(t){var e="",n="";for(var s in t)s&&t[s]&&r.call(t,s)&&(e=e+n+s,n=" ");return e}(t):t||""}function i(t){if(!t)return"";if("object"==typeof t){var e="";for(var n in t)r.call(t,n)&&(e=e+n+":"+t[n]+";");return e}return t+""}function o(t,e,n,r){return!1!==e&&null!=e&&(e||"class"!==t&&"style"!==t)?!0===e?" "+(r?t:t+'="'+t+'"'):("function"==typeof e.toJSON&&(e=e.toJSON()),"string"==typeof e||(e=JSON.stringify(e),n||-1===e.indexOf('"'))?(n&&(e=u(e))," "+t+'="'+e+'"'):" "+t+"='"+e.replace(/'/g,"&#39;")+"'"):""}e.merge=function t(e,n){if(1===arguments.length){for(var r=e[0],s=1;s<e.length;s++)r=t(r,e[s]);return r}for(var o in n)if("class"===o){var a=e[o]||[];e[o]=(Array.isArray(a)?a:[a]).concat(n[o]||[])}else if("style"===o){a=(a=i(e[o]))&&";"!==a[a.length-1]?a+";":a;var u=i(n[o]);u=u&&";"!==u[u.length-1]?u+";":u,e[o]=a+u}else e[o]=n[o];return e},e.classes=s,e.style=i,e.attr=o,e.attrs=function(t,e){var n="";for(var a in t)if(r.call(t,a)){var u=t[a];if("class"===a){n=o(a,u=s(u),!1,e)+n;continue}"style"===a&&(u=i(u)),n+=o(a,u,!1,e)}return n};var a=/["&<>]/;function u(t){var e=""+t,n=a.exec(e);if(!n)return t;var r,s,i,o="";for(r=n.index,s=0;r<e.length;r++){switch(e.charCodeAt(r)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 60:i="&lt;";break;case 62:i="&gt;";break;default:continue}s!==r&&(o+=e.substring(s,r)),s=r+1,o+=i}return s!==r?o+e.substring(s,r):o}e.escape=u,e.rethrow=function t(e,r,s,i){if(!(e instanceof Error))throw e;if(!("undefined"==typeof window&&r||i))throw e.message+=" on line "+s,e;try{i=i||n(49).readFileSync(r,"utf8")}catch(n){t(e,null,s)}var o=3,a=i.split("\n"),u=Math.max(s-o,0),l=Math.min(a.length,s+o);o=a.slice(u,l).map(function(t,e){var n=e+u+1;return(n==s?"  > ":"    ")+n+"| "+t}).join("\n");throw e.path=r,e.message=(r||"Pug")+":"+s+"\n"+o+"\n\n"+e.message,e}},function(t,e,n){var r=n(7);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){var r=n(0),s=n(1),i=n(10),o=n(6),a=n(13),u=function(t,e,n){var l,c,h,f=t&u.F,p=t&u.G,d=t&u.S,m=t&u.P,v=t&u.B,g=t&u.W,_=p?s:s[e]||(s[e]={}),b=_.prototype,y=p?r:d?r[e]:(r[e]||{}).prototype;for(l in p&&(n=e),n)(c=!f&&y&&void 0!==y[l])&&a(_,l)||(h=c?y[l]:n[l],_[l]=p&&"function"!=typeof y[l]?n[l]:v&&c?i(h,r):g&&y[l]==h?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(h):m&&"function"==typeof h?i(Function.call,h):h,m&&((_.virtual||(_.virtual={}))[l]=h,t&u.R&&b&&!b[l]&&o(b,l,h)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,n){var r=n(12),s=n(28);t.exports=n(8)?function(t,e,n){return r.f(t,e,s(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(20)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports={}},function(t,e,n){var r=n(11);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,s){return t.call(e,n,r,s)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(4),s=n(57),i=n(58),o=Object.defineProperty;e.f=n(8)?Object.defineProperty:function(t,e,n){if(r(t),e=i(e,!0),r(n),s)try{return o(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(64),s=n(18);t.exports=function(t){return r(s(t))}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){t.exports={default:n(90),__esModule:!0}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){t.exports=!0},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var r=n(7),s=n(0).document,i=r(s)&&r(s.createElement);t.exports=function(t){return i?s.createElement(t):{}}},function(t,e,n){var r=n(63),s=n(32);t.exports=Object.keys||function(t){return r(t,s)}},function(t,e,n){var r=n(30)("keys"),s=n(31);t.exports=function(t){return r[t]||(r[t]=s(t))}},function(t,e,n){var r=n(12).f,s=n(13),i=n(2)("toStringTag");t.exports=function(t,e,n){t&&!s(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},function(t,e,n){"use strict";var r=n(11);t.exports.f=function(t){return new function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=r(e),this.reject=r(n)}(t)}},function(t,e,n){t.exports={default:n(87),__esModule:!0}},function(t,e,n){"use strict";var r=n(19),s=n(5),i=n(59),o=n(6),a=n(9),u=n(60),l=n(24),c=n(67),h=n(2)("iterator"),f=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,n,d,m,v,g){u(n,e,d);var _,b,y,w=function(t){if(!f&&t in L)return L[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},x=e+" Iterator",S="values"==m,E=!1,L=t.prototype,T=L[h]||L["@@iterator"]||m&&L[m],M=T||w(m),P=m?S?w("entries"):M:void 0,O="Array"==e&&L.entries||T;if(O&&(y=c(O.call(new t)))!==Object.prototype&&y.next&&(l(y,x,!0),r||"function"==typeof y[h]||o(y,h,p)),S&&T&&"values"!==T.name&&(E=!0,M=function(){return T.call(this)}),r&&!g||!f&&!E&&L[h]||o(L,h,M),a[e]=M,a[x]=p,m)if(_={values:S?M:w("values"),keys:v?M:w("keys"),entries:P},g)for(b in _)b in L||i(L,b,_[b]);else s(s.P+s.F*(f||E),e,_);return _}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(17),s=Math.min;t.exports=function(t){return t>0?s(r(t),9007199254740991):0}},function(t,e,n){var r=n(1),s=n(0),i=s["__core-js_shared__"]||(s["__core-js_shared__"]={});(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(19)?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var r=n(0).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(18);t.exports=function(t){return Object(r(t))}},function(t,e,n){var r=n(15),s=n(2)("toStringTag"),i="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),s))?n:i?r(e):"Object"==(o=r(e))&&"function"==typeof e.callee?"Arguments":o}},function(t,e,n){var r=n(4),s=n(11),i=n(2)("species");t.exports=function(t,e){var n,o=r(t).constructor;return void 0===o||void 0==(n=r(o)[i])?e:s(n)}},function(t,e,n){var r,s,i,o=n(10),a=n(78),u=n(33),l=n(21),c=n(0),h=c.process,f=c.setImmediate,p=c.clearImmediate,d=c.MessageChannel,m=c.Dispatch,v=0,g={},_=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},b=function(t){_.call(t.data)};f&&p||(f=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return g[++v]=function(){a("function"==typeof t?t:Function(t),e)},r(v),v},p=function(t){delete g[t]},"process"==n(15)(h)?r=function(t){h.nextTick(o(_,t,1))}:m&&m.now?r=function(t){m.now(o(_,t,1))}:d?(i=(s=new d).port2,s.port1.onmessage=b,r=o(i.postMessage,i,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(t){c.postMessage(t+"","*")},c.addEventListener("message",b,!1)):r="onreadystatechange"in l("script")?function(t){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),_.call(t)}}:function(t){setTimeout(o(_,t,1),0)}),t.exports={set:f,clear:p}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var r=n(4),s=n(7),i=n(25);t.exports=function(t,e){if(r(t),s(e)&&e.constructor===t)return e;var n=i.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){n(3),t.exports=function(t){return'<form><label class="label"><textarea class="input form__textarea" rows="2" cols="53" placeholder="Сообщение" data-tooltip="Введите сообщение" name="message"></textarea></label><input class="button button_form" type="submit" value="ОТПРАВИТЬ" id="button"><label class="form__label button__icon" for="button"></label></form>'}},function(t,e,n){t.exports={default:n(100),__esModule:!0}},function(t,e,n){"use strict";s(n(43));var r=s(n(45));function s(t){return t&&t.__esModule?t:{default:t}}firebase.initializeApp({apiKey:"AIzaSyCW0TqK1Bsd6A7r7e3kYN6isiJ20tcChCM",authDomain:"chat-2b2e7.firebaseapp.com",databaseURL:"https://chat-2b2e7.firebaseio.com",projectId:"chat-2b2e7",storageBucket:"chat-2b2e7.appspot.com",messagingSenderId:"242297640263"}),new r.default({element:document.getElementById("app")})},function(t,e,n){},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),p(n(46));var r=p(n(48)),s=p(n(50)),i=p(n(51)),o=p(n(86)),a=p(n(96)),u=p(n(99)),l=p(n(101)),c=p(n(104)),h=p(n(113)),f=p(n(120));function p(t){return t&&t.__esModule?t:{default:t}}e.default=class{constructor({element:t}){this.app=t,this.appTemplate=r.default.bind(this),this.networkService=new i.default,this.pages={},this.messagesUrl,this.usersUrl,this.currentUser,this.currentPage,this._methodBinding(this.onLoginSubmit,this._startChat,this._startLogin),this._initialStartApp(),this._initEvents()}_methodBinding(...t){t.forEach(t=>this["_"===t.name.charAt(0)?t.name.slice(1):t.name]=t.bind(this))}_initialStartApp(){this._getUrls().then(t=>(this._renderAppTemplate(),t)).then(()=>{this.router=new f.default,this.router.pagesRegistration.call(this,this.app),this.router.initEvents.call(this,this.app),this.router.setCurentPage.call(this,"startChat"),this.router.start.call(this)}).then(()=>this._startChat()).catch(t=>{let e=document.getElementById("chat");e.classList.remove("chat__content_empty"),e.classList.add("network_error")})}_getUrls(){return this.networkService.httpReq({url:s.default,method:"GET"}).then(t=>(t=JSON.parse(t),this.messagesUrl=t.messages,this.usersUrl=t.users,t)).catch(t=>{})}_renderAppTemplate(){this.app.innerHTML=this.appTemplate()}_initEvents(){window.addEventListener("resize",()=>this._setVh())}_startChat(){let t=document.querySelector(".app__content");t||setTimeout(()=>{this.startChat()},100),t&&(this.currentUser=document.getElementById("username").innerHTML?document.getElementById("username").innerHTML:window.sessionStorage.getItem("currentUser"),document.getElementById("username").innerHTML=this.currentUser,this.router.setCurentPage.call(this,"startChat"),this.chat=new c.default({element:t,networkService:i.default,messagesUrl:this.messagesUrl,form:o.default,tooltip:a.default,currentUser:this.currentUser}),this.chat.initialStartChat(),this._setVh())}_setVh(){let t=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${t}px`);let e=document.querySelector(".app__header").offsetHeight,n=document.querySelector(".chat__form"),r=n&&n.offsetHeight?n.offsetHeight:160,s=document.querySelector(".app__content"),i=document.getElementById("chat"),o=window.innerHeight-e;s.style.height=o>r+e?o+"px":r+e+"px",this.currentUser&&i&&(i.style.height=parseFloat(s.style.height)-r+"px")}onLoginSubmit(t){t&&(window.sessionStorage.setItem("currentUser",t),this.messagesLength=0,this.currentUser=document.getElementById("username").innerHTML=t,this.startChat())}_startLogin(){let t=document.querySelector(".app__content");t||setTimeout(()=>{this._startLogin()},100),t&&(this.login=new h.default({element:t,usersUrl:this.usersUrl,networkService:i.default,form:o.default,tooltip:a.default,users:u.default,modal:l.default}),this.login.onSubmit=this.onLoginSubmit,this.login.initialStartLogin(),this.router.setCurentPage.call(this,"startLogin"))}}},function(t,e,n){},,function(t,e,n){n(3),t.exports=function(t){return'<div class="app"><div class="app__header"><a class="a menu__item item__icon item__icon_chat " href="/chat" title="Главная страница" name="startChat">чат</a><span class="app__header_user" id="username"></span><a class="a menu__item item__icon item__icon_login" href="/chat/login" title="Войти в чат" name="startLogin">войти</a></div><div class="app__content"></div></div>'}},function(t,e){},function(t,e,n){t.exports=n.p+"urls.json"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,s=(r=n(52))&&r.__esModule?r:{default:r};e.default=class{constructor(){}httpReq({url:t,method:e,data:n}){return new s.default((r,s)=>{let i=new XMLHttpRequest;i.open(e,t,!0),i.addEventListener("load",function(){if(200!==this.status){let t=Error(this.statusText);t.code=this.status,s(t)}r(this.response)}),i.addEventListener("error",()=>{s(Error("Network Error"))}),!n||"POST"!==e&&"PUT"!==e?i.send():i.send(n)})}}},function(t,e,n){t.exports={default:n(53),__esModule:!0}},function(t,e,n){n(54),n(55),n(68),n(72),n(84),n(85),t.exports=n(1).Promise},function(t,e){},function(t,e,n){"use strict";var r=n(56)(!0);n(27)(String,"String",function(t){this._t=t+"",this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var r=n(17),s=n(18);t.exports=function(t){return function(e,n){var i,o,a=s(e)+"",u=r(n),l=a.length;return u<0||u>=l?t?"":void 0:(i=a.charCodeAt(u))<55296||i>56319||u+1===l||(o=a.charCodeAt(u+1))<56320||o>57343?t?a.charAt(u):i:t?a.slice(u,u+2):o-56320+(i-55296<<10)+65536}}},function(t,e,n){t.exports=!n(8)&&!n(20)(function(){return 7!=Object.defineProperty(n(21)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(7);t.exports=function(t,e){if(!r(t))return t;var n,s;if(e&&"function"==typeof(n=t.toString)&&!r(s=n.call(t)))return s;if("function"==typeof(n=t.valueOf)&&!r(s=n.call(t)))return s;if(!e&&"function"==typeof(n=t.toString)&&!r(s=n.call(t)))return s;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){t.exports=n(6)},function(t,e,n){"use strict";var r=n(61),s=n(28),i=n(24),o={};n(6)(o,n(2)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(o,{next:s(1,n)}),i(t,e+" Iterator")}},function(t,e,n){var r=n(4),s=n(62),i=n(32),o=n(23)("IE_PROTO"),a=function(){},u=function(){var t,e=n(21)("iframe"),r=i.length;for(e.style.display="none",n(33).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;r--;)delete u.prototype[i[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(a.prototype=r(t),n=new a,a.prototype=null,n[o]=t):n=u(),void 0===e?n:s(n,e)}},function(t,e,n){var r=n(12),s=n(4),i=n(22);t.exports=n(8)?Object.defineProperties:function(t,e){s(t);for(var n,o=i(e),a=o.length,u=0;a>u;)r.f(t,n=o[u++],e[n]);return t}},function(t,e,n){var r=n(13),s=n(14),i=n(65)(!1),o=n(23)("IE_PROTO");t.exports=function(t,e){var n,a=s(t),u=0,l=[];for(n in a)n!=o&&r(a,n)&&l.push(n);for(;e.length>u;)r(a,n=e[u++])&&(~i(l,n)||l.push(n));return l}},function(t,e,n){var r=n(15);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){var r=n(14),s=n(29),i=n(66);t.exports=function(t){return function(e,n,o){var a,u=r(e),l=s(u.length),c=i(o,l);if(t&&n!=n){for(;l>c;)if((a=u[c++])!=a)return!0}else for(;l>c;c++)if((t||c in u)&&u[c]===n)return t||c||0;return!t&&-1}}},function(t,e,n){var r=n(17),s=Math.max,i=Math.min;t.exports=function(t,e){return(t=r(t))<0?s(t+e,0):i(t,e)}},function(t,e,n){var r=n(13),s=n(34),i=n(23)("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=s(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?o:null}},function(t,e,n){n(69);for(var r=n(0),s=n(6),i=n(9),o=n(2)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<a.length;u++){var l=a[u],c=r[l],h=c&&c.prototype;h&&!h[o]&&s(h,o,l),i[l]=i.Array}},function(t,e,n){"use strict";var r=n(70),s=n(71),i=n(9),o=n(14);t.exports=n(27)(Array,"Array",function(t,e){this._t=o(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,s(1)):s(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";var r,s,i,o,a=n(19),u=n(0),l=n(10),c=n(35),h=n(5),f=n(7),p=n(11),d=n(73),m=n(74),v=n(36),g=n(37).set,_=n(79)(),b=n(25),y=n(38),w=n(80),x=n(39),S=u.TypeError,E=u.process,L=E&&E.versions,T=L&&L.v8||"",M=u.Promise,P="process"==c(E),O=function(){},C=s=b.f,k=!!function(){try{var t=M.resolve(1),e=(t.constructor={})[n(2)("species")]=function(t){t(O,O)};return(P||"function"==typeof PromiseRejectionEvent)&&t.then(O)instanceof e&&0!==T.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(t){}}(),j=function(t){var e;return!(!f(t)||"function"!=typeof(e=t.then))&&e},U=function(t,e){if(!t._n){t._n=!0;var n=t._c;_(function(){for(var r=t._v,s=1==t._s,i=0,o=function(e){var n,i,o,a=s?e.ok:e.fail,u=e.resolve,l=e.reject,c=e.domain;try{a?(s||(2==t._h&&N(t),t._h=1),!0===a?n=r:(c&&c.enter(),n=a(r),c&&(c.exit(),o=!0)),n===e.promise?l(S("Promise-chain cycle")):(i=j(n))?i.call(n,u,l):u(n)):l(r)}catch(t){c&&!o&&c.exit(),l(t)}};n.length>i;)o(n[i++]);t._c=[],t._n=!1,e&&!t._h&&A(t)})}},A=function(t){g.call(u,function(){var e,n,r,s=t._v,i=R(t);if(i&&(e=y(function(){P?E.emit("unhandledRejection",s,t):(n=u.onunhandledrejection)?n({promise:t,reason:s}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",s)}),t._h=P||R(t)?2:1),t._a=void 0,i&&e.e)throw e.v})},R=function(t){return 1!==t._h&&0===(t._a||t._c).length},N=function(t){g.call(u,function(){var e;P?E.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})},H=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),U(e,!0))},F=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw S("Promise can't be resolved itself");(e=j(t))?_(function(){var r={_w:n,_d:!1};try{e.call(t,l(F,r,1),l(H,r,1))}catch(t){H.call(r,t)}}):(n._v=t,n._s=1,U(n,!1))}catch(t){H.call({_w:n,_d:!1},t)}}};k||(M=function(t){d(this,M,"Promise","_h"),p(t),r.call(this);try{t(l(F,this,1),l(H,this,1))}catch(t){H.call(this,t)}},(r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(81)(M.prototype,{then:function(t,e){var n=C(v(this,M));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=P?E.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&U(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new r;this.promise=t,this.resolve=l(F,t,1),this.reject=l(H,t,1)},b.f=C=function(t){return t===M||t===o?new i(t):s(t)}),h(h.G+h.W+h.F*!k,{Promise:M}),n(24)(M,"Promise"),n(82)("Promise"),o=n(1).Promise,h(h.S+h.F*!k,"Promise",{reject:function(t){var e=C(this);return(0,e.reject)(t),e.promise}}),h(h.S+h.F*(a||!k),"Promise",{resolve:function(t){return x(a&&this===o?M:this,t)}}),h(h.S+h.F*!(k&&n(83)(function(t){M.all(t).catch(O)})),"Promise",{all:function(t){var e=this,n=C(e),r=n.resolve,s=n.reject,i=y(function(){var n=[],i=0,o=1;m(t,!1,function(t){var a=i++,u=!1;n.push(void 0),o++,e.resolve(t).then(function(t){u||(u=!0,n[a]=t,--o||r(n))},s)}),--o||r(n)});return i.e&&s(i.v),n.promise},race:function(t){var e=this,n=C(e),r=n.reject,s=y(function(){m(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return s.e&&r(s.v),n.promise}})},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(10),s=n(75),i=n(76),o=n(4),a=n(29),u=n(77),l={},c={};(e=t.exports=function(t,e,n,h,f){var p,d,m,v,g=f?function(){return t}:u(t),_=r(n,h,e?2:1),b=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(i(g)){for(p=a(t.length);p>b;b++)if((v=e?_(o(d=t[b])[0],d[1]):_(t[b]))===l||v===c)return v}else for(m=g.call(t);!(d=m.next()).done;)if((v=s(m,_,d.value,e))===l||v===c)return v}).BREAK=l,e.RETURN=c},function(t,e,n){var r=n(4);t.exports=function(t,e,n,s){try{return s?e(r(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&r(i.call(t)),e}}},function(t,e,n){var r=n(9),s=n(2)("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||i[s]===t)}},function(t,e,n){var r=n(35),s=n(2)("iterator"),i=n(9);t.exports=n(1).getIteratorMethod=function(t){if(void 0!=t)return t[s]||t["@@iterator"]||i[r(t)]}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(0),s=n(37).set,i=r.MutationObserver||r.WebKitMutationObserver,o=r.process,a=r.Promise,u="process"==n(15)(o);t.exports=function(){var t,e,n,l=function(){var r,s;for(u&&(r=o.domain)&&r.exit();t;){s=t.fn,t=t.next;try{s()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(u)n=function(){o.nextTick(l)};else if(!i||r.navigator&&r.navigator.standalone)if(a&&a.resolve){var c=a.resolve(void 0);n=function(){c.then(l)}}else n=function(){s.call(r,l)};else{var h=!0,f=document.createTextNode("");new i(l).observe(f,{characterData:!0}),n=function(){f.data=h=!h}}return function(r){var s={fn:r,next:void 0};e&&(e.next=s),t||(t=s,n()),e=s}}},function(t,e,n){var r=n(0).navigator;t.exports=r&&r.userAgent||""},function(t,e,n){var r=n(6);t.exports=function(t,e,n){for(var s in e)n&&t[s]?t[s]=e[s]:r(t,s,e[s]);return t}},function(t,e,n){"use strict";var r=n(0),s=n(1),i=n(12),o=n(8),a=n(2)("species");t.exports=function(t){var e="function"==typeof s[t]?s[t]:r[t];o&&e&&!e[a]&&i.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,n){var r=n(2)("iterator"),s=!1;try{var i=[7][r]();i.return=function(){s=!0},Array.from(i,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!s)return!1;var n=!1;try{var i=[7],o=i[r]();o.next=function(){return{done:n=!0}},i[r]=function(){return o},t(i)}catch(t){}return n}},function(t,e,n){"use strict";var r=n(5),s=n(1),i=n(0),o=n(36),a=n(39);r(r.P+r.R,"Promise",{finally:function(t){var e=o(this,s.Promise||i.Promise),n="function"==typeof t;return this.then(n?function(n){return a(e,t()).then(function(){return n})}:t,n?function(n){return a(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){"use strict";var r=n(5),s=n(25),i=n(38);r(r.S,"Promise",{try:function(t){var e=s.f(this),n=i(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(26)),s=i(n(16));function i(t){return t&&t.__esModule?t:{default:t}}i(n(94)),i(n(40)),e.default=class{constructor({element:t,template:e,tooltip:n}){this.form=t,this.tooltip=n,this.template=e,this.tooltips={},this._onSubmit=this._onSubmit.bind(this),this._hidePlaceholder=this._hidePlaceholder.bind(this),this._showPlaceholder=this._showPlaceholder.bind(this)}_initEvents(){this.form.addEventListener("submit",this._onSubmit),this.form.addEventListener("focus",this._hidePlaceholder,!0),this.form.addEventListener("blur",this._showPlaceholder,!0)}_onSubmit(t){t.preventDefault();let e=this._collectData();this.onSubmit(e)}_hidePlaceholder(t){let e=t.target;e.placeholder&&(this._createTooltip({group:"placeholder",elem:e,tooltipContent:e.placeholder}),e.placeholder="")}_showPlaceholder(t){let e=t.target;e.value.length||this.tooltips.placeholder&&(e.placeholder=this.tooltips.placeholder[e.name].tooltipContent,this._removeTooltip({group:"placeholder",elem:e}))}_collectData(){let t={};return this.form.querySelectorAll("[name]").forEach(e=>{"FORM"!==e.tagName&&(e.value.length&&("e-mail"!==e.name||this._checkMail(e.value))?(this._removeErrorClass(e),t[e.name]=e.value):this._setErrorClass(e,e.dataset.tooltip))}),t.time=this._setMessageTime(),t.formName=this.form.firstChild.name,t}_setErrorClass(t,e){t.classList.add("error"),this._createTooltip({group:"error",elem:t,tooltipContent:e})}_removeErrorClass(t){t.classList.contains("error")&&t.classList.remove("error"),this._removeTooltip({group:"error",elem:t})}_checkMail(t){return/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(t)}_setMessageTime(){return(new Date).toLocaleString("ru",{day:"2-digit",month:"2-digit",year:"2-digit",minute:"2-digit",hour:"2-digit",second:"2-digit"})}onSubmit(t){}render(){this.form.innerHTML=this.template(),this._placeholdersRegister(),this._observer(),this._initEvents()}_placeholdersRegister(){this.placeholders={},this.form.querySelectorAll("[placeholder]").forEach(t=>{t.placeholder&&(this.placeholders[t.placeholder]=t)})}_observer(){let t,e,n;return t=[this.form,this.form.parentElement,this.form.parentElement.parentElement],e=new MutationObserver(t=>{if(!document.querySelector(`[name=${this.form.name}]`)){if(!(0,s.default)(this.tooltips).length)return;(0,r.default)(this.tooltips).forEach(t=>{(0,r.default)(this.tooltips[t]).forEach(e=>{this.tooltips[t][e].tooltip&&(document.body.removeChild(this.tooltips[t][e].tooltip),delete this.tooltips[t][e].tooltip,delete this.tooltips[t][e])})})}}),n={childList:!0},t.forEach(t=>{if(t)return e.observe(t,n)})}_createTooltip({group:t,elem:e,tooltipContent:n}){this.tooltips[t]||(this.tooltips[t]={}),this.tooltip&&!this.tooltips[t][e.name]&&(this.tooltips[t][e.name]=new this.tooltip({element:e,tooltipContent:n,form:this.form,group:t}),this.tooltips[t][e.name].createTooltip())}_removeTooltip({group:t,elem:e}){this.tooltips[t]&&this.tooltips[t][e.name]&&(this.tooltips[t][e.name].removeTooltip(),delete this.tooltips[t][e.name])}}},function(t,e,n){n(88),t.exports=n(1).Object.keys},function(t,e,n){var r=n(34),s=n(22);n(89)("keys",function(){return function(t){return s(r(t))}})},function(t,e,n){var r=n(5),s=n(1),i=n(20);t.exports=function(t,e){var n=(s.Object||{})[t]||Object[t],o={};o[t]=e(n),r(r.S+r.F*i(function(){n(1)}),"Object",o)}},function(t,e,n){n(91),t.exports=n(1).Object.values},function(t,e,n){var r=n(5),s=n(92)(!1);r(r.S,"Object",{values:function(t){return s(t)}})},function(t,e,n){var r=n(22),s=n(14),i=n(93).f;t.exports=function(t){return function(e){for(var n,o=s(e),a=r(o),u=a.length,l=0,c=[];u>l;)i.call(o,n=a[l++])&&c.push(t?[n,o[n]]:o[n]);return c}}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){},,function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),(r=n(97))&&r.__esModule,e.default=class{constructor({element:t,tooltipContent:e="placeholder",group:n}){this.target=t,this.tooltipContent=e,this.group=n,this.tooltip,this.trotting=this._throttle(this._setTooltipPosition,500),this._initEvents()}_initEvents(){window.addEventListener("resize",()=>{this.tooltip&&this.trotting()})}_throttle(t,e){let n,r,s=!1;return function i(){if(s)return n=arguments,void(r=this);t.apply(this,arguments),s=!0,setTimeout(function(){s=!1,n&&(i.apply(r,n),n=r=null)},e)}}createTooltip(){this.tooltip=document.createElement("div"),this.tooltip.className=`tooltip tooltip_${this.group}`,this.tooltip.dataset.show="show-tooltip",this.tooltip.innerHTML=this.tooltipContent,document.body.appendChild(this.tooltip),this.targetBorderRadius=getComputedStyle(this.target,null).borderRadius?parseFloat(getComputedStyle(this.target,null).borderRadius):0,this._setTooltipPosition()}_setTooltipPosition(){this._defineCoordinate(),this.tooltip.style.top=Math.round(this.top)+"px",this.tooltip.style.left=Math.round(this.left)+"px"}_defineCoordinate(){this.top=this.target.getBoundingClientRect().top-this.tooltip.offsetHeight+pageYOffset,this.top-this.tooltip.offsetHeight-pageYOffset<0&&(this.top-=this.tooltip.offsetHeight);let t=parseFloat(getComputedStyle(this.target,null).paddingLeft),e=parseFloat(getComputedStyle(this.target,null).marginLeft);"placeholder"!==this.group?this.left=this.target.getBoundingClientRect().left+this.target.offsetWidth-e-this.tooltip.offsetWidth-this.targetBorderRadius+pageXOffset:this.left=this.target.getBoundingClientRect().left+this.targetBorderRadius+t+e+pageXOffset}removeTooltip(){this.tooltip&&document.body.removeChild(this.tooltip),this.tooltip=null}}},function(t,e,n){},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(41)),s=o(n(26)),i=o(n(16));function o(t){return t&&t.__esModule?t:{default:t}}e.default=class{constructor({usersUrl:t,networkService:e}){this.networkService=new e,this.usersUrl=t,this.delay=0,this.usersList,this.getUsers()}getUsers(){this._makeRequest({}).then(t=>(this.usersList=Array.isArray(JSON.parse(t))?JSON.parse(t):(0,i.default)(JSON.parse(t)),this.usersList))}_makeRequest({url:t=this.usersUrl,method:e="GET",data:n}){return this.networkService.httpReq({url:t,method:e,data:n})}checkUser(t){return(0,s.default)(this.usersList).some(e=>{let n;return"login"===t.form&&(n=this.usersList[e]["user-name"]===t.user&&this.usersList[e].pass===t.pass),"sign"===t.form&&(n=this.usersList[e]["user-name"]===t.user||this.usersList[e]["e-mail"]===t.mail),"forgot"===t.form&&(n=this.usersList[e]["user-name"]===t.user&&this.usersList[e]["e-mail"]===t.mail),n})}setNewUser({data:t,usersUrl:e}){let n=(0,r.default)(t);this._makeRequest({url:e,method:"POST",data:n}).then(()=>{this.getUsers()})}changePassword({data:t,usersUrl:e}){this._makeRequest({url:this.usersUrl,method:"GET"}).then(e=>(e=JSON.parse(e),(0,s.default)(e).forEach(n=>{t["user-name"]===e[n]["user-name"]&&t["e-mail"]===e[n]["e-mail"]&&(e[n].pass=t.pass)}),(0,r.default)(e))).then(t=>{this.networkService.httpReq({url:e,method:"PUT",data:t})}).then(()=>{this.getUsers()})}getUsersList(){return this.usersList}}},function(t,e,n){var r=n(1),s=r.JSON||(r.JSON={stringify:JSON.stringify});t.exports=function(t){return s.stringify.apply(s,arguments)}},function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),(r=n(102))&&r.__esModule,e.default=class{constructor({string:t}){this.modalContent=t,this._onEvent=this._onEvent.bind(this),this._createModal(),this._initEvent()}_createModal(){this.modal=document.createElement("div"),this.modal.className="modal";let t=document.createElement("div");t.className="modal__content";let e=document.createElement("div");e.className="modal__text",e.innerHTML=this.modalContent;let n=document.createElement("button");n.className="button button_modal",n.type="submit",n.innerHTML="ok",t.appendChild(e),t.appendChild(n),this.modal.appendChild(t),document.body.appendChild(this.modal)}_initEvent(){this.modal.addEventListener("click",this._onEvent,!1)}_onEvent(t){let e=t.target;"submit"!=e.type&&e!=this.modal||this.onEvent()}onEvent(){}}},function(t,e,n){},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=u(n(41)),s=u(n(16)),i=(u(n(105)),u(n(107))),o=u(n(108)),a=u(n(40));function u(t){return t&&t.__esModule?t:{default:t}}e.default=class{constructor({element:t,messagesUrl:e,networkService:n,form:r,tooltip:s,currentUser:o}){this.chat=t,this.messagesUrl=e,this.networkService=new n,this.form=r,this.tooltip=s,this.currentUser=o,this.chatTemplate=i.default.bind(this),this.messagesLength=0,this.delay=1e3}initialStartChat(){this.chat.innerHTML=this.chatTemplate(),this.networkService.httpReq({url:this.messagesUrl,method:"GET"}).then(t=>{t=JSON.parse(t),this.messages=Array.isArray(t)?t:(0,s.default)(t),this.messagesLength=this.messages.length,this._startChat()}).catch(t=>{document.getElementById("chat").classList.add("database_error")})}_startChat(){this.message=new o.default({element:document.getElementById("chat"),messages:this.messages,currentUser:this.currentUser}),this.form=new this.form({element:document.getElementById("form"),template:a.default,tooltip:this.tooltip}),this.form.onSubmit=this.onSubmit.bind(this),this._updateMessages(),this._render(this.currentUser)}_updateMessages(){let t=this;setTimeout(function e(){t.networkService.httpReq({url:t.messagesUrl,method:"GET"}).then(e=>{e=JSON.parse(e);let n=(e=Array.isArray(e)?e:(0,s.default)(e)).slice(t.messagesLength);n.length&&n.forEach(e=>{t.messagesLength+=1,t.message.addMessage(e),t._render(!1)})}),setTimeout(e,t.delay)},this.delay)}_render(t){t?(this.message.render(),this.form.render()):this.message.render()}onSubmit(t){if(!t.message)return;t.user=this.currentUser;let e=(0,r.default)(t);this.networkService.httpReq({url:this.messagesUrl,method:"POST",data:e}),this.messagesLength+=1,this.message.addMessage(t),this._render(!0)}}},function(t,e,n){},,function(t,e,n){n(3),t.exports=function(t){return'<div class="chat"><div class="chat__content chat__content_empty" id="chat"></div></div><div class="chat__form" id="form"></div>'}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(16)),s=(i(n(109)),i(n(111)));function i(t){return t&&t.__esModule?t:{default:t}}i(n(112)),e.default=class{constructor({element:t,messages:e=[],currentUser:n}){this.chat=t,this.messages=Array.isArray(e)?e:(0,r.default)(e),this.currentUser=n,this.count=0,this.messageTemplate=s.default.bind(this)}render(){if(this.messages.length===this.count)return;if(!this.messages[this.count].message.length||!this.messages[this.count].user.length)return void(this.count+=1);let t=this._createChatElements();this.chat.appendChild(t),this._scrollElement(this.chat.lastElementChild)}_createChatElements(){let t=document.createDocumentFragment();for(this.count;this.count<this.messages.length;this.count+=1){let e=document.createElement("div");e.className=this.messages[this.count].user!==this.currentUser?"message-wrapper":"message-wrapper current-user",e.innerHTML=this.messageTemplate(this.messages[this.count]),t.appendChild(e)}return t}_scrollElement(t){t.getBoundingClientRect().bottom-t.offsetHeight<=this.chat.clientHeight||(this.chat.parentElement.style.overflowY="auto",t.scrollIntoView(!1))}addMessage(t){t.user.length&&t.message.length&&this.messages.push({user:t.user,time:t.time,message:t.message})}}},function(t,e,n){},,function(t,e,n){var r=n(3);t.exports=function(t){var e,n="";return n+'<div class="user"><span class="user__image"></span><span class="user__name">'+r.escape(null==(e=this.messages[this.count].user)?"":e)+'</span></div><div class="message">'+r.escape(null==(e=this.messages[this.count].message)?"":e)+'<span class="message__data">'+r.escape(null==(e=this.messages[this.count].time)?"":e)+"</span></div>"}},function(t,e,n){t.exports=n.p+"components/message/user-pic.png"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=u(n(26)),s=(u(n(114)),u(n(116))),i=u(n(117)),o=u(n(118)),a=u(n(119));function u(t){return t&&t.__esModule?t:{default:t}}e.default=class{constructor({element:t,usersUrl:e,networkService:n,form:r,tooltip:u,users:l,modal:c}){this.logins=t,this.usersUrl=e,this.networkService=n,this.form=r,this.tooltip=u,this.users=new l({usersUrl:this.usersUrl,networkService:this.networkService}),this.modal=c,this.loginHeaderTemplate=s.default,this.loginTemplate=i.default,this.signTemplate=o.default,this.forgotTemplate=a.default,this.currentForm,this.userElement,this.currentUser,this.loginErrorText="Введенные данные (логин или пароль) не верны, попробуйте еще раз",this.signErrorText="Пользователь с таким логином или мейлом уже существует",this.forgotErrorText="Пользователя с таким логином и мейлом не существует",this.tabsList={},this.currentRadioChecked=document.querySelector('input[type="radio"]:checked'),this._initEvents()}_initEvents(){this.logins.addEventListener("click",t=>{let e=t.target;if((this.tabsList[e.value]||e.classList.contains("icon-password"))&&(this.tabsList[e.value]&&this._setTabsClass(this.tabsList[e.value]),e.classList.contains("icon-password"))){let t=this.logins.querySelector("input[name='pass']");e.classList.toggle("icon-password_unlock"),"password"===t.getAttribute("type")?t.setAttribute("type","text"):t.setAttribute("type","password")}})}_setTabsClass(t){(0,r.default)(this.tabsList).forEach(e=>{t.tab!==this.tabsList[e].tab||this.tabsList[e].tab.classList.contains("button_active")||(this.tabsList[e].tab.classList.add("button_active"),this._renderForm(this.tabsList[e].template)),t.tab!==this.tabsList[e].tab&&this.tabsList[e].tab.classList.contains("button_active")&&this.tabsList[e].tab.classList.remove("button_active")})}_renderForm(t){this.currentForm=new this.form({element:this.loginsContent,template:t,tooltip:this.tooltip}),this.currentForm.render(),this.currentForm.onSubmit=this.onLoginSubmit.bind(this)}onLoginSubmit(t){if(t["user-name"]&&t.pass&&("login"==t.formName||t["e-mail"]))switch(t.formName){case"login":return this.users.checkUser({form:t.formName,user:t["user-name"],pass:t.pass})?void this.onSubmit(t["user-name"]):(this.modalWindow=new this.modal({string:this.loginErrorText}),void(this.modalWindow.onEvent=this._onModalEvent.bind(this)));case"sign":return this.users.checkUser({form:t.formName,user:t["user-name"],mail:t["e-mail"]})?(this.modalWindow=new this.modal({string:this.signErrorText}),void(this.modalWindow.onEvent=this._onModalEvent.bind(this))):(this.users.setNewUser({data:t,usersUrl:this.usersUrl}),void this.onSubmit(t["user-name"]));case"forgot":return this.users.checkUser({form:t.formName,user:t["user-name"],mail:t["e-mail"]})?(this.users.changePassword({data:t,usersUrl:this.usersUrl}),void this.onSubmit(t["user-name"])):(this.modalWindow=new this.modal({string:this.forgotErrorText}),void(this.modalWindow.onEvent=this._onModalEvent.bind(this)))}}_onModalEvent(){document.body.removeChild(this.modalWindow.modal),this.modalWindow=null}onSubmit(t){}initialStartLogin(){this.logins.innerHTML=this.loginHeaderTemplate(),this.loginsContent=this.logins.querySelector(".login__content_wrapper"),this.tabs=this.logins.querySelectorAll(".button_login"),this.tabs.forEach(t=>{this.tabsList[t.value]={},this.tabsList[t.value].tab=t,this.tabsList[t.value].template=this[t.value+"Template"]}),this._renderForm(this.tabsList.login.template)}}},function(t,e,n){},,function(t,e,n){n(3),t.exports=function(t){return'<div class="login" id="login"><div class="buttons"><button class="button button_login button_active" value="login">Войти</button><button class="button button_login" value="sign">Регистрация</button><button class="button button_login" value="forgot">Восстановить</button></div><div class="login__content_wrapper"></div></div>'}},function(t,e,n){n(3),t.exports=function(t){return'<form class="form login__content login__content_login" name="login"><label class="label label__user"><input class="input input_login input_user-name" type="text" placeholder="Логин" data-tooltip="Введите логин" name="user-name"></label><label class="label label__password"><input class="input input_login input_password" type="password" placeholder="Пароль" data-tooltip="Введите пароль" name="pass"><div class="icon-password icon-password_lock"></div></label><input class="button button_form" type="submit" value="Войти" id="login-button"></form>'}},function(t,e,n){n(3),t.exports=function(t){return'<form class="form login__content login__content_sign" name="sign"><label class="label label__user"><input class="input input_login input_user-name" type="text" placeholder="Логин" data-tooltip="Введите логин" name="user-name"></label><label class="label label__email"><input class="input input_login input_email" type="text" placeholder="E-mail" data-tooltip="Введите Ваш e-mail" name="e-mail"></label><label class="label label__password"><input class="input input_login input_password" type="password" placeholder="Пароль" data-tooltip="Введите пароль" name="pass"><div class="icon-password icon-password_lock"></div></label><input class="button button_form" type="submit" value="Зарегистрироваться" id="sign-button"></form>'}},function(t,e,n){n(3),t.exports=function(t){return'<form class="form login__content  login__content_forgot" name="forgot"><label class="label label__user"><input class="input input_login input_user-name" type="text" placeholder="Логин" data-tooltip="Введите логин" name="user-name"></label><label class="label label__email"><input class="input input_login input_email" type="text" placeholder="E-mail" data-tooltip="Введите Ваш e-mail" name="e-mail"></label><label class="label label__password"><input class="input input_login input_password" type="password" placeholder="Новый пароль" data-tooltip="Введите новый пароль" name="pass"><div class="icon-password icon-password_lock"></div></label><input class="button button_form" type="submit" value="Восстановить" id="forgot-button"></form>'}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(){}start(){setInterval(()=>{let t=window.location.pathname;if(this.currentPage!==t)for(let e in this.pages)this.pages[e].url===t&&(this.pages[e].method(),this.currentPage=this.pages[e].url)},1e3)}pagesRegistration(){return this.pages={},document.querySelectorAll("a").forEach(t=>{t.getAttribute("href")&&(this.pages[t.name]={},this.pages[t.name].url=t.getAttribute("href"),this.pages[t.name].method=this[t.name],this.pages[t.name].element=t)}),this.pages}initEvents(t){t.addEventListener("click",t=>{let e=t.target;e.getAttribute("href")&&(t.preventDefault(),this.currentPage=this.pages[e.name].url,this.pages[e.name].method())},!0)}setCurentPage(t){this.currentPage=this.pages[t].url,window.history.pushState({},"",this.pages[t].url)}}}]);