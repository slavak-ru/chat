!function(t){var e={};function n(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(s,r,function(e){return t[e]}.bind(null,r));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="./",n(n.s=42)}([function(t,e,n){"use strict";var s=Object.prototype.hasOwnProperty;function r(t,e){return Array.isArray(t)?function(t,e){for(var n,s="",i="",o=Array.isArray(e),a=0;a<t.length;a++)(n=r(t[a]))&&(o&&e[a]&&(n=l(n)),s=s+i+n,i=" ");return s}(t,e):t&&"object"==typeof t?function(t){var e="",n="";for(var r in t)r&&t[r]&&s.call(t,r)&&(e=e+n+r,n=" ");return e}(t):t||""}function i(t){if(!t)return"";if("object"==typeof t){var e="";for(var n in t)s.call(t,n)&&(e=e+n+":"+t[n]+";");return e}return t+""}function o(t,e,n,s){return!1!==e&&null!=e&&(e||"class"!==t&&"style"!==t)?!0===e?" "+(s?t:t+'="'+t+'"'):("function"==typeof e.toJSON&&(e=e.toJSON()),"string"==typeof e||(e=JSON.stringify(e),n||-1===e.indexOf('"'))?(n&&(e=l(e))," "+t+'="'+e+'"'):" "+t+"='"+e.replace(/'/g,"&#39;")+"'"):""}e.merge=function t(e,n){if(1===arguments.length){for(var s=e[0],r=1;r<e.length;r++)s=t(s,e[r]);return s}for(var o in n)if("class"===o){var a=e[o]||[];e[o]=(Array.isArray(a)?a:[a]).concat(n[o]||[])}else if("style"===o){a=(a=i(e[o]))&&";"!==a[a.length-1]?a+";":a;var l=i(n[o]);l=l&&";"!==l[l.length-1]?l+";":l,e[o]=a+l}else e[o]=n[o];return e},e.classes=r,e.style=i,e.attr=o,e.attrs=function(t,e){var n="";for(var a in t)if(s.call(t,a)){var l=t[a];if("class"===a){n=o(a,l=r(l),!1,e)+n;continue}"style"===a&&(l=i(l)),n+=o(a,l,!1,e)}return n};var a=/["&<>]/;function l(t){var e=""+t,n=a.exec(e);if(!n)return t;var s,r,i,o="";for(s=n.index,r=0;s<e.length;s++){switch(e.charCodeAt(s)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 60:i="&lt;";break;case 62:i="&gt;";break;default:continue}r!==s&&(o+=e.substring(r,s)),r=s+1,o+=i}return r!==s?o+e.substring(r,s):o}e.escape=l,e.rethrow=function t(e,s,r,i){if(!(e instanceof Error))throw e;if(!("undefined"==typeof window&&s||i))throw e.message+=" on line "+r,e;try{i=i||n(49).readFileSync(s,"utf8")}catch(n){t(e,null,r)}var o=3,a=i.split("\n"),l=Math.max(r-o,0),u=Math.min(a.length,r+o);o=a.slice(l,u).map(function(t,e){var n=e+l+1;return(n==r?"  > ":"    ")+n+"| "+t}).join("\n");throw e.path=s,e.message=(s||"Pug")+":"+r+"\n"+o+"\n\n"+e.message,e}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},function(t,e,n){var s=n(30)("wks"),r=n(31),i=n(1).Symbol,o="function"==typeof i;(t.exports=function(t){return s[t]||(s[t]=o&&i[t]||(o?i:r)("Symbol."+t))}).store=s},function(t,e,n){var s=n(7);t.exports=function(t){if(!s(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){var s=n(1),r=n(2),i=n(10),o=n(6),a=n(13),l=function(t,e,n){var u,c,h,p=t&l.F,f=t&l.G,d=t&l.S,m=t&l.P,g=t&l.B,_=t&l.W,v=f?r:r[e]||(r[e]={}),b=v.prototype,y=f?s:d?s[e]:(s[e]||{}).prototype;for(u in f&&(n=e),n)(c=!p&&y&&void 0!==y[u])&&a(v,u)||(h=c?y[u]:n[u],v[u]=f&&"function"!=typeof y[u]?n[u]:g&&c?i(h,s):_&&y[u]==h?function(t){var e=function(e,n,s){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,s)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(h):m&&"function"==typeof h?i(Function.call,h):h,m&&((v.virtual||(v.virtual={}))[u]=h,t&l.R&&b&&!b[u]&&o(b,u,h)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},function(t,e,n){var s=n(12),r=n(28);t.exports=n(8)?function(t,e,n){return s.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(20)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports={}},function(t,e,n){var s=n(11);t.exports=function(t,e,n){if(s(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,s){return t.call(e,n,s)};case 3:return function(n,s,r){return t.call(e,n,s,r)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var s=n(4),r=n(58),i=n(59),o=Object.defineProperty;e.f=n(8)?Object.defineProperty:function(t,e,n){if(s(t),e=i(e,!0),s(n),r)try{return o(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var s=n(65),r=n(18);t.exports=function(t){return s(r(t))}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){t.exports={default:n(91),__esModule:!0}},function(t,e){var n=Math.ceil,s=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?s:n)(t)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){t.exports=!0},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var s=n(7),r=n(1).document,i=s(r)&&s(r.createElement);t.exports=function(t){return i?r.createElement(t):{}}},function(t,e,n){var s=n(64),r=n(32);t.exports=Object.keys||function(t){return s(t,r)}},function(t,e,n){var s=n(30)("keys"),r=n(31);t.exports=function(t){return s[t]||(s[t]=r(t))}},function(t,e,n){var s=n(12).f,r=n(13),i=n(3)("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,i)&&s(t,i,{configurable:!0,value:e})}},function(t,e,n){"use strict";var s=n(11);t.exports.f=function(t){return new function(t){var e,n;this.promise=new t(function(t,s){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=s}),this.resolve=s(e),this.reject=s(n)}(t)}},function(t,e,n){t.exports={default:n(88),__esModule:!0}},function(t,e,n){"use strict";var s=n(19),r=n(5),i=n(60),o=n(6),a=n(9),l=n(61),u=n(24),c=n(68),h=n(3)("iterator"),p=!([].keys&&"next"in[].keys()),f=function(){return this};t.exports=function(t,e,n,d,m,g,_){l(n,e,d);var v,b,y,w=function(t){if(!p&&t in L)return L[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},S=e+" Iterator",x="values"==m,E=!1,L=t.prototype,T=L[h]||L["@@iterator"]||m&&L[m],P=T||w(m),M=m?x?w("entries"):P:void 0,O="Array"==e&&L.entries||T;if(O&&(y=c(O.call(new t)))!==Object.prototype&&y.next&&(u(y,S,!0),s||"function"==typeof y[h]||o(y,h,f)),x&&T&&"values"!==T.name&&(E=!0,P=function(){return T.call(this)}),s&&!_||!p&&!E&&L[h]||o(L,h,P),a[e]=P,a[S]=f,m)if(v={values:x?P:w("values"),keys:g?P:w("keys"),entries:M},_)for(b in v)b in L||i(L,b,v[b]);else r(r.P+r.F*(p||E),e,v);return v}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var s=n(17),r=Math.min;t.exports=function(t){return t>0?r(s(t),9007199254740991):0}},function(t,e,n){var s=n(2),r=n(1),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:s.version,mode:n(19)?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},function(t,e){var n=0,s=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+s).toString(36))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var s=n(1).document;t.exports=s&&s.documentElement},function(t,e,n){var s=n(18);t.exports=function(t){return Object(s(t))}},function(t,e,n){var s=n(15),r=n(3)("toStringTag"),i="Arguments"==s(function(){return arguments}());t.exports=function(t){var e,n,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),r))?n:i?s(e):"Object"==(o=s(e))&&"function"==typeof e.callee?"Arguments":o}},function(t,e,n){var s=n(4),r=n(11),i=n(3)("species");t.exports=function(t,e){var n,o=s(t).constructor;return void 0===o||void 0==(n=s(o)[i])?e:r(n)}},function(t,e,n){var s,r,i,o=n(10),a=n(79),l=n(33),u=n(21),c=n(1),h=c.process,p=c.setImmediate,f=c.clearImmediate,d=c.MessageChannel,m=c.Dispatch,g=0,_={},v=function(){var t=+this;if(_.hasOwnProperty(t)){var e=_[t];delete _[t],e()}},b=function(t){v.call(t.data)};p&&f||(p=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return _[++g]=function(){a("function"==typeof t?t:Function(t),e)},s(g),g},f=function(t){delete _[t]},"process"==n(15)(h)?s=function(t){h.nextTick(o(v,t,1))}:m&&m.now?s=function(t){m.now(o(v,t,1))}:d?(i=(r=new d).port2,r.port1.onmessage=b,s=o(i.postMessage,i,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(s=function(t){c.postMessage(t+"","*")},c.addEventListener("message",b,!1)):s="onreadystatechange"in u("script")?function(t){l.appendChild(u("script")).onreadystatechange=function(){l.removeChild(this),v.call(t)}}:function(t){setTimeout(o(v,t,1),0)}),t.exports={set:p,clear:f}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var s=n(4),r=n(7),i=n(25);t.exports=function(t,e){if(s(t),r(e)&&e.constructor===t)return e;var n=i.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){n(0),t.exports=function(t){return'<form><label class="label"><textarea class="input form__textarea" rows="2" cols="53" placeholder="Сообщение" data-tooltip="Введите сообщение" name="message"></textarea></label><input class="button button_form" type="submit" value="ОТПРАВИТЬ" id="button"><label class="form__label button__icon" for="button"></label></form>'}},function(t,e,n){t.exports={default:n(101),__esModule:!0}},function(t,e,n){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}s(n(43)),new(s(n(45)).default)({element:document.getElementById("app")})},function(t,e,n){},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),d(n(46));var s=d(n(48)),r=d(n(50)),i=d(n(51)),o=d(n(52)),a=d(n(87)),l=d(n(97)),u=d(n(100)),c=d(n(102)),h=d(n(105)),p=d(n(116)),f=d(n(128));function d(t){return t&&t.__esModule?t:{default:t}}e.default=class{constructor({element:t}){this.app=t,this.appTemplateRu=s.default,this.appTemplateEng=r.default,this.networkService=new o.default,this.pages={},this._methodBinding(this.onLoginSubmit,this._startChat,this._startLogin),this._initialStartApp()}_methodBinding(...t){t.forEach(t=>this["_"===t.name.charAt(0)?t.name.slice(1):t.name]=t.bind(this))}_initialStartApp(){return(async()=>{await this._getUrls().catch(t=>{let e=document.getElementById("chat");e.classList.remove("chat__content_empty"),e.classList.add("network_error")}),window.sessionStorage.getItem("currentLanguage")&&"ru"!==window.sessionStorage.getItem("currentLanguage")?(this._renderAppTemplate(this.appTemplateEng),window.sessionStorage.setItem("currentLanguage","eng")):(this._renderAppTemplate(this.appTemplateRu),window.sessionStorage.setItem("currentLanguage","ru")),this._initEvents(),this.router=new f.default,this.router.pagesRegistration.call(this,this.app),this.router.initEvents.call(this,this.app),this.router.setCurrentPage.call(this,"startChat"),this.router.start.call(this),"/chat/login"===window.sessionStorage.getItem("currentPage")?this._startLogin():this._startChat()})()}_getUrls(){return(async()=>{let t=await this.networkService.httpReq({url:i.default,method:"GET"}).catch(t=>{});t=JSON.parse(t),this.messagesUrl=t.messages,this.usersUrl=t.users})()}_renderAppTemplate(t){this.app.innerHTML=t()}_initEvents(){window.addEventListener("resize",()=>this._setVh()),window.addEventListener("click",t=>this._language(t))}_language(t){let e=t.target,n=document.getElementById("user-toggle");if(!n)return;let s,r=n.querySelector(".toggle"),i=n.querySelectorAll(".flag");if(e===n||e===r||e===i[0]||e===i[1])if(r.classList.contains("ru")){if(this._renderAppTemplate(this.appTemplateEng),window.sessionStorage.setItem("currentLanguage","eng"),"/chat"===(s=this.router.getCurrentPage.call(this)))return void this._startChat();this._startLogin()}else{if(this._renderAppTemplate(this.appTemplateRu),window.sessionStorage.setItem("currentLanguage","ru"),"/chat"===(s=this.router.getCurrentPage.call(this)))return void this._startChat();this._startLogin()}}_startChat(){let t=document.querySelector(".app__content");t||setTimeout(()=>{this.startChat()},100),t&&(this._isCurrentUser(),this.router.setCurrentPage.call(this,"startChat"),this.chat=new h.default({element:t,NetworkService:o.default,messagesUrl:this.messagesUrl,form:a.default,tooltip:l.default,currentUser:this.currentUser}),this._setVh(),this._getIP(),window.sessionStorage.setItem("currentPage","/chat"),this.chat.initialStartChat())}_isCurrentUser(){let t=document.getElementById("user-toggle");window.sessionStorage.getItem("currentUser")&&(this.currentUser=window.sessionStorage.getItem("currentUser")),t.classList.contains("header__user")&&(this.currentUser=document.getElementById("user-toggle").innerHTML),this.currentUser&&(document.getElementById("user-toggle").innerHTML=this.currentUser,t.classList.add("header__user"))}_setVh(){let t=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${t}px`);let e=document.querySelector(".app__header").offsetHeight,n=document.querySelector(".chat__form"),s=n&&n.offsetHeight?n.offsetHeight:160,r=document.querySelector(".app__content"),i=document.getElementById("chat"),o=window.innerHeight-e;r.style.height=o>s+e?o+"px":s+e+"px",this.currentUser&&i&&(i.style.height=parseFloat(r.style.height)-s+"px")}onLoginSubmit(t){t&&(window.sessionStorage.setItem("currentUser",t),this.messagesLength=0,this.currentUser=document.getElementById("user-toggle").innerHTML=t,this.startChat())}_startLogin(){let t=document.querySelector(".app__content");t||setTimeout(()=>{this._startLogin()},100),t&&(this.login=new p.default({element:t,usersUrl:this.usersUrl,NetworkService:o.default,form:a.default,Tooltip:l.default,Users:u.default,Modal:c.default}),this.login.onSubmit=this.onLoginSubmit,this.login.initialStartLogin(),window.sessionStorage.setItem("currentPage","/chat/login"),this._isCurrentUser(),this.router.setCurrentPage.call(this,"startLogin"))}_getIP(){(async()=>{let t=await this.networkService.httpReq({url:"https://jsonip.com",method:"GET"}).catch(t=>{this.userIP="n/a"});t=JSON.parse(t),this.userIP=t.ip,window.sessionStorage.setItem("userIP",this.userIP)})()}}},function(t,e,n){},,function(t,e,n){n(0),t.exports=function(t){return'<main class="app"><nav class="app__header"><a class="a menu__item item__icon item__icon_chat " href="/chat" title="Главная страница" name="startChat">чат</a><div class="header__toggle" id="user-toggle"><div class="flag flag_ru" title="Ru"></div><div class="toggle toggle_left ru"></div><div class="flag flag_eng" title="Eng"></div></div><a class="a menu__item item__icon item__icon_login" href="/chat/login" title="Войти" name="startLogin">войти</a></nav><section class="app__content"></section></main>'}},function(t,e){},function(t,e,n){n(0),t.exports=function(t){return'<main class="app"><nav class="app__header"><a class="a menu__item item__icon item__icon_chat " href="/chat" title="Home page" name="startChat">chat</a><div class="header__toggle" id="user-toggle"><div class="flag flag_ru" title="Ru"></div><div class="toggle"></div><div class="flag flag_eng" title="Eng"></div></div><a class="a menu__item item__icon item__icon_login" href="/chat/login" title="Login" name="startLogin">login</a></nav><section class="app__content"></section></main>'}},function(t,e,n){t.exports=n.p+"urls.json"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,r=(s=n(53))&&s.__esModule?s:{default:s};e.default=class{httpReq({url:t,method:e,data:n}){return new r.default((s,r)=>{let i=new XMLHttpRequest;i.open(e,t,!0),i.addEventListener("load",function(){if(200!==this.status){let t=Error(this.statusText);t.code=this.status,r(t)}s(this.response)}),i.addEventListener("error",()=>{r(Error("Network Error"))}),!n||"POST"!==e&&"PUT"!==e?i.send():i.send(n)})}}},function(t,e,n){t.exports={default:n(54),__esModule:!0}},function(t,e,n){n(55),n(56),n(69),n(73),n(85),n(86),t.exports=n(2).Promise},function(t,e){},function(t,e,n){"use strict";var s=n(57)(!0);n(27)(String,"String",function(t){this._t=t+"",this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=s(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var s=n(17),r=n(18);t.exports=function(t){return function(e,n){var i,o,a=r(e)+"",l=s(n),u=a.length;return l<0||l>=u?t?"":void 0:(i=a.charCodeAt(l))<55296||i>56319||l+1===u||(o=a.charCodeAt(l+1))<56320||o>57343?t?a.charAt(l):i:t?a.slice(l,l+2):o-56320+(i-55296<<10)+65536}}},function(t,e,n){t.exports=!n(8)&&!n(20)(function(){return 7!=Object.defineProperty(n(21)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var s=n(7);t.exports=function(t,e){if(!s(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!s(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!s(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!s(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){t.exports=n(6)},function(t,e,n){"use strict";var s=n(62),r=n(28),i=n(24),o={};n(6)(o,n(3)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=s(o,{next:r(1,n)}),i(t,e+" Iterator")}},function(t,e,n){var s=n(4),r=n(63),i=n(32),o=n(23)("IE_PROTO"),a=function(){},l=function(){var t,e=n(21)("iframe"),s=i.length;for(e.style.display="none",n(33).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;s--;)delete l.prototype[i[s]];return l()};t.exports=Object.create||function(t,e){var n;return null!==t?(a.prototype=s(t),n=new a,a.prototype=null,n[o]=t):n=l(),void 0===e?n:r(n,e)}},function(t,e,n){var s=n(12),r=n(4),i=n(22);t.exports=n(8)?Object.defineProperties:function(t,e){r(t);for(var n,o=i(e),a=o.length,l=0;a>l;)s.f(t,n=o[l++],e[n]);return t}},function(t,e,n){var s=n(13),r=n(14),i=n(66)(!1),o=n(23)("IE_PROTO");t.exports=function(t,e){var n,a=r(t),l=0,u=[];for(n in a)n!=o&&s(a,n)&&u.push(n);for(;e.length>l;)s(a,n=e[l++])&&(~i(u,n)||u.push(n));return u}},function(t,e,n){var s=n(15);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==s(t)?t.split(""):Object(t)}},function(t,e,n){var s=n(14),r=n(29),i=n(67);t.exports=function(t){return function(e,n,o){var a,l=s(e),u=r(l.length),c=i(o,u);if(t&&n!=n){for(;u>c;)if((a=l[c++])!=a)return!0}else for(;u>c;c++)if((t||c in l)&&l[c]===n)return t||c||0;return!t&&-1}}},function(t,e,n){var s=n(17),r=Math.max,i=Math.min;t.exports=function(t,e){return(t=s(t))<0?r(t+e,0):i(t,e)}},function(t,e,n){var s=n(13),r=n(34),i=n(23)("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),s(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?o:null}},function(t,e,n){n(70);for(var s=n(1),r=n(6),i=n(9),o=n(3)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<a.length;l++){var u=a[l],c=s[u],h=c&&c.prototype;h&&!h[o]&&r(h,o,u),i[u]=i.Array}},function(t,e,n){"use strict";var s=n(71),r=n(72),i=n(9),o=n(14);t.exports=n(27)(Array,"Array",function(t,e){this._t=o(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):r(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),i.Arguments=i.Array,s("keys"),s("values"),s("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";var s,r,i,o,a=n(19),l=n(1),u=n(10),c=n(35),h=n(5),p=n(7),f=n(11),d=n(74),m=n(75),g=n(36),_=n(37).set,v=n(80)(),b=n(25),y=n(38),w=n(81),S=n(39),x=l.TypeError,E=l.process,L=E&&E.versions,T=L&&L.v8||"",P=l.Promise,M="process"==c(E),O=function(){},C=r=b.f,k=!!function(){try{var t=P.resolve(1),e=(t.constructor={})[n(3)("species")]=function(t){t(O,O)};return(M||"function"==typeof PromiseRejectionEvent)&&t.then(O)instanceof e&&0!==T.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(t){}}(),U=function(t){var e;return!(!p(t)||"function"!=typeof(e=t.then))&&e},A=function(t,e){if(!t._n){t._n=!0;var n=t._c;v(function(){for(var s=t._v,r=1==t._s,i=0,o=function(e){var n,i,o,a=r?e.ok:e.fail,l=e.resolve,u=e.reject,c=e.domain;try{a?(r||(2==t._h&&I(t),t._h=1),!0===a?n=s:(c&&c.enter(),n=a(s),c&&(c.exit(),o=!0)),n===e.promise?u(x("Promise-chain cycle")):(i=U(n))?i.call(n,l,u):l(n)):u(s)}catch(t){c&&!o&&c.exit(),u(t)}};n.length>i;)o(n[i++]);t._c=[],t._n=!1,e&&!t._h&&j(t)})}},j=function(t){_.call(l,function(){var e,n,s,r=t._v,i=R(t);if(i&&(e=y(function(){M?E.emit("unhandledRejection",r,t):(n=l.onunhandledrejection)?n({promise:t,reason:r}):(s=l.console)&&s.error&&s.error("Unhandled promise rejection",r)}),t._h=M||R(t)?2:1),t._a=void 0,i&&e.e)throw e.v})},R=function(t){return 1!==t._h&&0===(t._a||t._c).length},I=function(t){_.call(l,function(){var e;M?E.emit("rejectionHandled",t):(e=l.onrejectionhandled)&&e({promise:t,reason:t._v})})},N=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),A(e,!0))},H=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw x("Promise can't be resolved itself");(e=U(t))?v(function(){var s={_w:n,_d:!1};try{e.call(t,u(H,s,1),u(N,s,1))}catch(t){N.call(s,t)}}):(n._v=t,n._s=1,A(n,!1))}catch(t){N.call({_w:n,_d:!1},t)}}};k||(P=function(t){d(this,P,"Promise","_h"),f(t),s.call(this);try{t(u(H,this,1),u(N,this,1))}catch(t){N.call(this,t)}},(s=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(82)(P.prototype,{then:function(t,e){var n=C(g(this,P));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=M?E.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&A(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new s;this.promise=t,this.resolve=u(H,t,1),this.reject=u(N,t,1)},b.f=C=function(t){return t===P||t===o?new i(t):r(t)}),h(h.G+h.W+h.F*!k,{Promise:P}),n(24)(P,"Promise"),n(83)("Promise"),o=n(2).Promise,h(h.S+h.F*!k,"Promise",{reject:function(t){var e=C(this);return(0,e.reject)(t),e.promise}}),h(h.S+h.F*(a||!k),"Promise",{resolve:function(t){return S(a&&this===o?P:this,t)}}),h(h.S+h.F*!(k&&n(84)(function(t){P.all(t).catch(O)})),"Promise",{all:function(t){var e=this,n=C(e),s=n.resolve,r=n.reject,i=y(function(){var n=[],i=0,o=1;m(t,!1,function(t){var a=i++,l=!1;n.push(void 0),o++,e.resolve(t).then(function(t){l||(l=!0,n[a]=t,--o||s(n))},r)}),--o||s(n)});return i.e&&r(i.v),n.promise},race:function(t){var e=this,n=C(e),s=n.reject,r=y(function(){m(t,!1,function(t){e.resolve(t).then(n.resolve,s)})});return r.e&&s(r.v),n.promise}})},function(t,e){t.exports=function(t,e,n,s){if(!(t instanceof e)||void 0!==s&&s in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var s=n(10),r=n(76),i=n(77),o=n(4),a=n(29),l=n(78),u={},c={};(e=t.exports=function(t,e,n,h,p){var f,d,m,g,_=p?function(){return t}:l(t),v=s(n,h,e?2:1),b=0;if("function"!=typeof _)throw TypeError(t+" is not iterable!");if(i(_)){for(f=a(t.length);f>b;b++)if((g=e?v(o(d=t[b])[0],d[1]):v(t[b]))===u||g===c)return g}else for(m=_.call(t);!(d=m.next()).done;)if((g=r(m,v,d.value,e))===u||g===c)return g}).BREAK=u,e.RETURN=c},function(t,e,n){var s=n(4);t.exports=function(t,e,n,r){try{return r?e(s(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&s(i.call(t)),e}}},function(t,e,n){var s=n(9),r=n(3)("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(s.Array===t||i[r]===t)}},function(t,e,n){var s=n(35),r=n(3)("iterator"),i=n(9);t.exports=n(2).getIteratorMethod=function(t){if(void 0!=t)return t[r]||t["@@iterator"]||i[s(t)]}},function(t,e){t.exports=function(t,e,n){var s=void 0===n;switch(e.length){case 0:return s?t():t.call(n);case 1:return s?t(e[0]):t.call(n,e[0]);case 2:return s?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return s?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return s?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var s=n(1),r=n(37).set,i=s.MutationObserver||s.WebKitMutationObserver,o=s.process,a=s.Promise,l="process"==n(15)(o);t.exports=function(){var t,e,n,u=function(){var s,r;for(l&&(s=o.domain)&&s.exit();t;){r=t.fn,t=t.next;try{r()}catch(s){throw t?n():e=void 0,s}}e=void 0,s&&s.enter()};if(l)n=function(){o.nextTick(u)};else if(!i||s.navigator&&s.navigator.standalone)if(a&&a.resolve){var c=a.resolve(void 0);n=function(){c.then(u)}}else n=function(){r.call(s,u)};else{var h=!0,p=document.createTextNode("");new i(u).observe(p,{characterData:!0}),n=function(){p.data=h=!h}}return function(s){var r={fn:s,next:void 0};e&&(e.next=r),t||(t=r,n()),e=r}}},function(t,e,n){var s=n(1).navigator;t.exports=s&&s.userAgent||""},function(t,e,n){var s=n(6);t.exports=function(t,e,n){for(var r in e)n&&t[r]?t[r]=e[r]:s(t,r,e[r]);return t}},function(t,e,n){"use strict";var s=n(1),r=n(2),i=n(12),o=n(8),a=n(3)("species");t.exports=function(t){var e="function"==typeof r[t]?r[t]:s[t];o&&e&&!e[a]&&i.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,n){var s=n(3)("iterator"),r=!1;try{var i=[7][s]();i.return=function(){r=!0},Array.from(i,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var i=[7],o=i[s]();o.next=function(){return{done:n=!0}},i[s]=function(){return o},t(i)}catch(t){}return n}},function(t,e,n){"use strict";var s=n(5),r=n(2),i=n(1),o=n(36),a=n(39);s(s.P+s.R,"Promise",{finally:function(t){var e=o(this,r.Promise||i.Promise),n="function"==typeof t;return this.then(n?function(n){return a(e,t()).then(function(){return n})}:t,n?function(n){return a(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){"use strict";var s=n(5),r=n(25),i=n(38);s(s.S,"Promise",{try:function(t){var e=r.f(this),n=i(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(n(26)),r=i(n(16));function i(t){return t&&t.__esModule?t:{default:t}}i(n(95)),i(n(40)),e.default=class{constructor({element:t,tooltip:e}){this.form=t,this.Tooltip=e,this.tooltips={},this._onSubmit=this._onSubmit.bind(this),this._hidePlaceholder=this._hidePlaceholder.bind(this),this._showPlaceholder=this._showPlaceholder.bind(this)}_initEvents(){this.form.addEventListener("submit",this._onSubmit),this.form.addEventListener("focus",this._hidePlaceholder,!0),this.form.addEventListener("blur",this._showPlaceholder,!0)}_onSubmit(t){t.preventDefault();let e=this._collectData();this.onSubmit(e)}_hidePlaceholder(t){let e=t.target;e.placeholder&&(this._createTooltip({group:"placeholder",elem:e,tooltipContent:e.placeholder}),e.placeholder="")}_showPlaceholder(t){let e=t.target;e.value.length||this.tooltips.placeholder&&(e.placeholder=this.tooltips.placeholder[e.name].tooltipContent,this._removeTooltip({group:"placeholder",elem:e}))}_collectData(){let t={};return this.form.querySelectorAll("[name]").forEach(e=>{"FORM"!==e.tagName&&(e.value.length&&("e-mail"!==e.name||this._checkMail(e.value))?(this._removeErrorClass(e),t[e.name]=e.value):this._setErrorClass(e,e.dataset.tooltip))}),t.time=this._setMessageTime(),t.formName=this.form.firstChild.name,t}_setErrorClass(t,e){t.classList.add("error"),this._createTooltip({group:"error",elem:t,tooltipContent:e})}_removeErrorClass(t){t.classList.contains("error")&&t.classList.remove("error"),this._removeTooltip({group:"error",elem:t})}_checkMail(t){return/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(t)}_setMessageTime(){return(new Date).toLocaleString("ru",{day:"2-digit",month:"2-digit",year:"2-digit",minute:"2-digit",hour:"2-digit",second:"2-digit"})}onSubmit(t){}render(t){this.template=t,this.form.innerHTML=this.template(),this._placeholdersRegister(),this._observer(),this._initEvents()}_placeholdersRegister(){this.placeholders={},this.form.querySelectorAll("[placeholder]").forEach(t=>{t.placeholder&&(this.placeholders[t.placeholder]=t)})}_observer(){let t,e,n;return t=this._addObserverTargets(this.form),e=new MutationObserver(t=>{if(!document.querySelector(`[name=${this.form.name}]`)){if(!(0,r.default)(this.tooltips).length)return;(0,s.default)(this.tooltips).forEach(t=>{(0,s.default)(this.tooltips[t]).forEach(e=>{this.tooltips[t][e].tooltip&&(document.body.removeChild(this.tooltips[t][e].tooltip),delete this.tooltips[t][e].tooltip,delete this.tooltips[t][e])})})}}),n={childList:!0},t.forEach(t=>{if(t)return e.observe(t,n)})}_addObserverTargets(t){let e=t,n=[];return function(){for(;e;){if(n.push(e),e.parentElement===document.body)return;e=e.parentElement}}(),n}_createTooltip({group:t,elem:e,tooltipContent:n}){this.tooltips[t]||(this.tooltips[t]={}),this.tooltips[t][e.name]||(this.tooltips[t][e.name]=new this.Tooltip({element:e,tooltipContent:n,form:this.form,group:t}),this.tooltips[t][e.name].createTooltip())}_removeTooltip({group:t,elem:e}){this.tooltips[t]&&this.tooltips[t][e.name]&&(this.tooltips[t][e.name].removeTooltip(),delete this.tooltips[t][e.name])}}},function(t,e,n){n(89),t.exports=n(2).Object.keys},function(t,e,n){var s=n(34),r=n(22);n(90)("keys",function(){return function(t){return r(s(t))}})},function(t,e,n){var s=n(5),r=n(2),i=n(20);t.exports=function(t,e){var n=(r.Object||{})[t]||Object[t],o={};o[t]=e(n),s(s.S+s.F*i(function(){n(1)}),"Object",o)}},function(t,e,n){n(92),t.exports=n(2).Object.values},function(t,e,n){var s=n(5),r=n(93)(!1);s(s.S,"Object",{values:function(t){return r(t)}})},function(t,e,n){var s=n(22),r=n(14),i=n(94).f;t.exports=function(t){return function(e){for(var n,o=r(e),a=s(o),l=a.length,u=0,c=[];l>u;)i.call(o,n=a[u++])&&c.push(t?[n,o[n]]:o[n]);return c}}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){},,function(t,e,n){"use strict";var s;Object.defineProperty(e,"__esModule",{value:!0}),(s=n(98))&&s.__esModule,e.default=class{constructor({element:t,tooltipContent:e="placeholder",group:n}){this.target=t,this.tooltipContent=e,this.group=n,this.trotting=this._throttle(this._setTooltipPosition,500),this._initEvents()}_initEvents(){window.addEventListener("resize",()=>{this.tooltip&&this.trotting()})}_throttle(t,e){let n,s,r=!1;return function i(){if(r)return n=arguments,void(s=this);t.apply(this,arguments),r=!0,setTimeout(function(){r=!1,n&&(i.apply(s,n),n=s=null)},e)}}createTooltip(){this.tooltip=document.createElement("div"),this.tooltip.className=`tooltip tooltip_${this.group}`,this.tooltip.dataset.show="show-tooltip",this.tooltip.innerHTML=this.tooltipContent,document.body.appendChild(this.tooltip),this.targetBorderRadius=getComputedStyle(this.target,null).borderRadius?parseFloat(getComputedStyle(this.target,null).borderRadius):0,this._setTooltipPosition()}_setTooltipPosition(){this._defineCoordinate(),this.tooltip.style.top=Math.round(this.top)+"px",this.tooltip.style.left=Math.round(this.left)+"px"}_defineCoordinate(){this.top=this.target.getBoundingClientRect().top-this.tooltip.offsetHeight+pageYOffset,this.top-this.tooltip.offsetHeight-pageYOffset<0&&(this.top-=this.tooltip.offsetHeight);let t=parseFloat(getComputedStyle(this.target,null).paddingLeft),e=parseFloat(getComputedStyle(this.target,null).marginLeft);"placeholder"!==this.group?this.left=this.target.getBoundingClientRect().left+this.target.offsetWidth-e-this.tooltip.offsetWidth-this.targetBorderRadius+pageXOffset:this.left=this.target.getBoundingClientRect().left+this.targetBorderRadius+t+e+pageXOffset}removeTooltip(){this.tooltip&&document.body.removeChild(this.tooltip),this.tooltip=null}}},function(t,e,n){},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=o(n(41)),r=o(n(26)),i=o(n(16));function o(t){return t&&t.__esModule?t:{default:t}}e.default=class{constructor({usersUrl:t,networkService:e}){this.networkService=e,this.usersUrl=t,this.delay=0,this.getUsers()}getUsers(){return(async()=>{let t=await this._makeRequest({}).catch(t=>{});return this.usersList=Array.isArray(JSON.parse(t))?JSON.parse(t):(0,i.default)(JSON.parse(t)),this.usersList})()}_makeRequest({url:t=this.usersUrl,method:e="GET",data:n}){return this.networkService.httpReq({url:t,method:e,data:n})}checkUser(t){return(0,r.default)(this.usersList).some(e=>{let n;return"login"===t.form&&(n=this.usersList[e]["user-name"]===t.user&&this.usersList[e].pass===t.pass),"sign"===t.form&&(n=this.usersList[e]["user-name"]===t.user||this.usersList[e]["e-mail"]===t.mail),"forgot"===t.form&&(n=this.usersList[e]["user-name"]===t.user&&this.usersList[e]["e-mail"]===t.mail),n})}setNewUser({data:t,usersUrl:e}){let n=(0,s.default)(t);return(async()=>{await this._makeRequest({url:e,method:"POST",data:n}).catch(t=>{}),this.getUsers()})()}changePassword({data:t,usersUrl:e}){return(async()=>{let n=await this._makeRequest({url:this.usersUrl,method:"GET"});n=JSON.parse(n),(0,r.default)(n).forEach(e=>{t["user-name"]===n[e]["user-name"]&&t["e-mail"]===n[e]["e-mail"]&&(n[e].pass=t.pass)});let i=(0,s.default)(n);this.networkService.httpReq({url:e,method:"PUT",data:i})})()}getUsersList(){return this.usersList}}},function(t,e,n){var s=n(2),r=s.JSON||(s.JSON={stringify:JSON.stringify});t.exports=function(t){return r.stringify.apply(r,arguments)}},function(t,e,n){"use strict";var s;Object.defineProperty(e,"__esModule",{value:!0}),(s=n(103))&&s.__esModule,e.default=class{constructor(){this._onEvent=this._onEvent.bind(this)}createModal(t){if(this.modal)return;this.modal=document.createElement("div"),this.modal.className="modal";let e=document.createElement("div");e.className="modal__content";let n=document.createElement("div");n.className="modal__text",n.innerHTML=t;let s=document.createElement("button");s.className="button button_modal",s.type="submit",s.innerHTML="ok",e.appendChild(n),e.appendChild(s),this.modal.appendChild(e),document.body.appendChild(this.modal),this._initEvent()}removeModal(){document.body.removeChild(this.modal),this.modal=null}_initEvent(){this.modal.addEventListener("click",this._onEvent,!1)}_onEvent(t){let e=t.target;"submit"!==e.type&&e!==this.modal||this.onEvent()}onEvent(){}}},function(t,e,n){},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=c(n(41)),r=c(n(16)),i=(c(n(106)),c(n(108))),o=c(n(109)),a=c(n(110)),l=c(n(40)),u=c(n(115));function c(t){return t&&t.__esModule?t:{default:t}}e.default=class{constructor({element:t,messagesUrl:e,NetworkService:n,form:s,tooltip:r,currentUser:a}){this.chat=t,this.messagesUrl=e,this.networkService=new n,this.Form=s,this.tooltip=r,this.currentUser=a,this.chatTemplateRu=i.default.bind(this),this.chatTemplateEng=o.default.bind(this),this.messagesLength=0,this.delay=1e3}initialStartChat(){this.chat.innerHTML="ru"===window.sessionStorage.getItem("currentLanguage")?this.chatTemplateRu():this.chatTemplateEng(),(async()=>{let t=await this.networkService.httpReq({url:this.messagesUrl,method:"GET"}).catch(t=>{document.getElementById("chat").classList.add("database_error")});t=JSON.parse(t),this.messages=Array.isArray(t)?t:(0,r.default)(t),this.messagesLength=this.messages.length,this._startChat()})()}_startChat(){this.message=new a.default({element:document.getElementById("chat"),messages:this.messages,currentUser:this.currentUser}),this.form=new this.Form({element:document.getElementById("form"),tooltip:this.tooltip}),this.form.onSubmit=this.onSubmit.bind(this),this._updateMessages(),this._render(this.currentUser)}_updateMessages(){let t=this;setTimeout(function e(){t.networkService.httpReq({url:t.messagesUrl,method:"GET"}).then(e=>{e=JSON.parse(e);let n=(e=Array.isArray(e)?e:(0,r.default)(e)).slice(t.messagesLength);n.length&&n.forEach(e=>{t.messagesLength+=1,t.message.addMessage(e),t._render(!1)})}),setTimeout(e,t.delay)},this.delay)}_render(t){this.message.render(),t&&("ru"!==window.sessionStorage.getItem("currentLanguage")?this.form.render(u.default):this.form.render(l.default))}onSubmit(t){if(!t.message)return;t.user=this.currentUser,window.sessionStorage.getItem("userIP")&&(t.ip=window.sessionStorage.getItem("userIP"));let e=(0,s.default)(t);this.networkService.httpReq({url:this.messagesUrl,method:"POST",data:e}),this.messagesLength+=1,this.message.addMessage(t),this._render(!0)}}},function(t,e,n){},,function(t,e,n){n(0),t.exports=function(t){return'<div class="chat"><div class="chat__content chat__content_empty" id="chat"></div></div><div class="chat__form" id="form"></div>'}},function(t,e,n){n(0),t.exports=function(t){return'<div class="chat"><div class="chat__content chat__content_empty_eng" id="chat"></div></div><div class="chat__form" id="form"></div>'}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(n(16)),r=(i(n(111)),i(n(113)));function i(t){return t&&t.__esModule?t:{default:t}}i(n(114)),e.default=class{constructor({element:t,messages:e=[],currentUser:n}){this.chat=t,this.messages=Array.isArray(e)?e:(0,s.default)(e),this.currentUser=n,this.count=0,this.messageTemplate=r.default.bind(this)}render(){if(this.messages.length===this.count)return;this.messages[this.count].message.length&&this.messages[this.count].user.length||(this.count+=1);let t=this._createChatElements();this.chat.appendChild(t),this._scrollElement(this.chat.lastElementChild)}_createChatElements(){let t=document.createDocumentFragment();for(this.count;this.count<this.messages.length;this.count+=1){let e=document.createElement("div");e.className=this.messages[this.count].user!==this.currentUser?"message-wrapper":"message-wrapper current-user",e.innerHTML=this.messageTemplate(this.messages[this.count]),t.appendChild(e)}return t}_scrollElement(t){t&&(t.getBoundingClientRect().bottom-t.offsetHeight<=this.chat.clientHeight||(this.chat.parentElement.style.overflowY="auto",t.scrollIntoView(!1)))}addMessage(t){t.user.length&&t.message.length&&this.messages.push({user:t.user,time:t.time,message:t.message})}}},function(t,e,n){},,function(t,e,n){var s=n(0);t.exports=function(t){var e,n="";return n+'<div class="user"><span class="user__image"></span><span class="user__name">'+s.escape(null==(e=this.messages[this.count].user)?"":e)+'</span></div><div class="message">'+s.escape(null==(e=this.messages[this.count].message)?"":e)+'<span class="message__data">'+s.escape(null==(e=this.messages[this.count].time)?"":e)+"</span></div>"}},function(t,e,n){t.exports=n.p+"components/message/user-pic.png"},function(t,e,n){n(0),t.exports=function(t){return'<form><label class="label"><textarea class="input form__textarea" rows="2" cols="53" placeholder="Message" data-tooltip="Enter message" name="message"></textarea></label><input class="button button_form" type="submit" value="Send" id="button"><label class="form__label button__icon" for="button"></label></form>'}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=f(n(26)),r=(f(n(117)),f(n(119))),i=f(n(120)),o=f(n(121)),a=f(n(122)),l=f(n(123)),u=f(n(124)),c=f(n(125)),h=f(n(126)),p=f(n(127));function f(t){return t&&t.__esModule?t:{default:t}}e.default=class{constructor({element:t,usersUrl:e,NetworkService:n,form:s,Tooltip:f,Users:d,Modal:m}){this.logins=t,this.usersUrl=e,this.networkService=new n,this.Form=s,this.tooltip=f,this.users=new d({usersUrl:this.usersUrl,networkService:this.networkService}),this.modal=new m,this.modal.onEvent=this._onModalEvent.bind(this),this.loginHeaderTemplateRu=r.default,this.loginHeaderTemplateEng=i.default,this.loginTemplateRu=o.default,this.loginTemplateEng=a.default,this.signTemplateRu=l.default,this.signTemplateEng=u.default,this.forgotTemplateRu=c.default,this.forgotTemplateEng=h.default,this.encrypt=new p.default,this.loginErrorTextRu="Введенные данные (логин или пароль) не верны, попробуйте еще раз",this.loginErrorTextEng="The data you entered (username or password) is incorrect, please try again",this.signErrorTextRu="Пользователь с таким логином или мейлом уже существует",this.signErrorTextEng="User with this login or email already exists",this.forgotErrorTextRu="Пользователя с таким логином и мейлом не существует",this.forgotErrorTextEng="User with this login and email does not exist",this.tabsList={},this.currentRadioChecked=document.querySelector('input[type="radio"]:checked'),this._initEvents()}_initEvents(){this.logins.addEventListener("click",t=>{let e=t.target;if((this.tabsList[e.value]||e.classList.contains("icon-password"))&&(this.tabsList[e.value]&&this._setTabsClass(this.tabsList[e.value]),e.classList.contains("icon-password"))){let t=this.logins.querySelector("input[name='pass']");e.classList.toggle("icon-password_unlock"),"password"===t.getAttribute("type")?t.setAttribute("type","text"):t.setAttribute("type","password")}})}_setTabsClass(t){(0,s.default)(this.tabsList).forEach(e=>{t.tab!==this.tabsList[e].tab||this.tabsList[e].tab.classList.contains("button_active")||(this.tabsList[e].tab.classList.add("button_active"),this._renderForm(this.tabsList[e].template)),t.tab!==this.tabsList[e].tab&&this.tabsList[e].tab.classList.contains("button_active")&&this.tabsList[e].tab.classList.remove("button_active")})}_renderForm(t){this.form.render(t),this.form.onSubmit=this.onLoginSubmit.bind(this)}onLoginSubmit(t){if(t["user-name"]&&t.pass&&("login"===t.formName||t["e-mail"]))switch(t.pass=this.encrypt.hashIt(t.pass),t["e-mail"]&&(t["e-mail"]=this.encrypt.hashIt(t["e-mail"])),window.sessionStorage.getItem("userIP")&&(t.ip=window.sessionStorage.getItem("userIP")),t.formName){case"sign":if(this.users.checkUser({form:t.formName,user:t["user-name"],mail:t["e-mail"]}))return void this._createModal("sign");this.users.setNewUser({data:t,usersUrl:this.usersUrl}),this.onSubmit(t["user-name"]);break;case"forgot":if(!this.users.checkUser({form:t.formName,user:t["user-name"],mail:t["e-mail"]}))return void this._createModal("forgot");this.users.changePassword({data:t,usersUrl:this.usersUrl}),this.onSubmit(t["user-name"]);break;default:if(!this.users.checkUser({form:t.formName,user:t["user-name"],pass:t.pass}))return void this._createModal("login");this.onSubmit(t["user-name"])}}_createModal(t){let e=this[t+"ErrorText"+("eng"===window.sessionStorage.getItem("currentLanguage")?"Eng":"Ru")];this.modal.createModal(e)}_onModalEvent(){this.modal.removeModal()}onSubmit(t){}initialStartLogin(){let t=window.sessionStorage.getItem("currentLanguage");this.logins.innerHTML="eng"===t?this.loginHeaderTemplateEng():this.loginHeaderTemplateRu(),this.loginsContent=this.logins.querySelector(".login__content_wrapper"),this.tabs=this.logins.querySelectorAll(".button_login");let e=t&&"eng"===t?"TemplateEng":"TemplateRu";this.tabs.forEach(t=>{this.tabsList[t.value]={},this.tabsList[t.value].tab=t,this.tabsList[t.value].template=this[t.value+e]}),this.form=new this.Form({element:this.loginsContent,tooltip:this.tooltip}),this._renderForm(this.tabsList.login.template)}}},function(t,e,n){},,function(t,e,n){n(0),t.exports=function(t){return'<div class="login" id="login"><div class="buttons"><button class="button button_login button_active" value="login">Войти</button><button class="button button_login" value="sign">Регистрация</button><button class="button button_login" value="forgot">Восстановить</button></div><div class="login__content_wrapper"></div></div>'}},function(t,e,n){n(0),t.exports=function(t){return'<div class="login" id="login"><div class="buttons"><button class="button button_login button_active" value="login">Login</button><button class="button button_login" value="sign">Sign Up</button><button class="button button_login" value="forgot">Restore</button></div><div class="login__content_wrapper"></div></div>'}},function(t,e,n){n(0),t.exports=function(t){return'<form class="form login__content login__content_login" name="login"><label class="label label__user"><input class="input input_login input_user-name" type="text" placeholder="Логин" data-tooltip="Введите логин" name="user-name"></label><label class="label label__password"><input class="input input_login input_password" type="password" placeholder="Пароль" data-tooltip="Введите пароль" name="pass"><div class="icon-password icon-password_lock"></div></label><input class="button button_form" type="submit" value="Войти" id="login-button"></form>'}},function(t,e,n){n(0),t.exports=function(t){return'<form class="form login__content login__content_login" name="login"><label class="label label__user"><input class="input input_login input_user-name" type="text" placeholder="Login" data-tooltip="Enter login" name="user-name"></label><label class="label label__password"><input class="input input_login input_password" type="password" placeholder="Password" data-tooltip="Enter password" name="pass"><div class="icon-password icon-password_lock"></div></label><input class="button button_form" type="submit" value="Login" id="login-button"></form>'}},function(t,e,n){n(0),t.exports=function(t){return'<form class="form login__content login__content_sign" name="sign"><label class="label label__user"><input class="input input_login input_user-name" type="text" placeholder="Логин" data-tooltip="Введите логин" name="user-name"></label><label class="label label__email"><input class="input input_login input_email" type="text" placeholder="E-mail" data-tooltip="Введите Ваш e-mail" name="e-mail"></label><label class="label label__password"><input class="input input_login input_password" type="password" placeholder="Пароль" data-tooltip="Введите пароль" name="pass"><div class="icon-password icon-password_lock"></div></label><input class="button button_form" type="submit" value="Зарегистрироваться" id="sign-button"></form>'}},function(t,e,n){n(0),t.exports=function(t){return'<form class="form login__content login__content_sign" name="sign"><label class="label label__user"><input class="input input_login input_user-name" type="text" placeholder="Login" data-tooltip="Enter login" name="user-name"></label><label class="label label__email"><input class="input input_login input_email" type="text" placeholder="E-mail" data-tooltip="Enter e-mail" name="e-mail"></label><label class="label label__password"><input class="input input_login input_password" type="password" placeholder="Password" data-tooltip="Enter password" name="pass"><div class="icon-password icon-password_lock"></div></label><input class="button button_form" type="submit" value="Sign Up" id="sign-button"></form>'}},function(t,e,n){n(0),t.exports=function(t){return'<form class="form login__content  login__content_forgot" name="forgot"><label class="label label__user"><input class="input input_login input_user-name" type="text" placeholder="Логин" data-tooltip="Введите логин" name="user-name"></label><label class="label label__email"><input class="input input_login input_email" type="text" placeholder="E-mail" data-tooltip="Введите Ваш e-mail" name="e-mail"></label><label class="label label__password"><input class="input input_login input_password" type="password" placeholder="Новый пароль" data-tooltip="Введите новый пароль" name="pass"><div class="icon-password icon-password_lock"></div></label><input class="button button_form" type="submit" value="Восстановить" id="forgot-button"></form>'}},function(t,e,n){n(0),t.exports=function(t){return'<form class="form login__content  login__content_forgot" name="forgot"><label class="label label__user"><input class="input input_login input_user-name" type="text" placeholder="Login" data-tooltip="Enter login" name="user-name"></label><label class="label label__email"><input class="input input_login input_email" type="text" placeholder="E-mail" data-tooltip="Enter e-mail" name="e-mail"></label><label class="label label__password"><input class="input input_login input_password" type="password" placeholder="New password" data-tooltip="Enter new password" name="pass"><div class="icon-password icon-password_lock"></div></label><input class="button button_form" type="submit" value="Restore" id="forgot-button"></form>'}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(){this.chrsz=8,this.b64pad=""}hashIt(t){let e=t;return this._binb2b64(this._coreSha1(this._str2binb(e),t.length*this.chrsz))}_binb2b64(t){for(var e="",n=0;n<4*t.length;n+=3)for(var s=(t[n>>2]>>8*(3-n%4)&255)<<16|(t[n+1>>2]>>8*(3-(n+1)%4)&255)<<8|t[n+2>>2]>>8*(3-(n+2)%4)&255,r=0;r<4;r++)8*n+6*r>32*t.length?e+=this._b64pad:e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(s>>6*(3-r)&63);return e}_coreSha1(t,e){t[e>>5]|=128<<24-e%32,t[15+(e+64>>9<<4)]=e;var n=Array(80);let s=1732584193,r=-271733879,i=-1732584194,o=271733878,a=-1009589776,l=t.length;for(let e=0;e<l;e+=16){let l=s,h=r,p=i,f=o,d=a;for(var u=0;u<80;u++){n[u]=u<16?t[e+u]:this._rol(n[u-3]^n[u-8]^n[u-14]^n[u-16],1);var c=this._safeAdd(this._safeAdd(this._rol(s,5),this._sha1Ft(u,r,i,o)),this._safeAdd(this._safeAdd(a,n[u]),this._sha1_kt(u)));a=o,o=i,i=this._rol(r,30),r=s,s=c}s=this._safeAdd(s,l),r=this._safeAdd(r,h),i=this._safeAdd(i,p),o=this._safeAdd(o,f),a=this._safeAdd(a,d)}return[s,r,i,o,a]}_str2binb(t){let e=[],n=(1<<this.chrsz)-1,s=t.length;for(let r=0;r<s*this.chrsz;r+=this.chrsz)e[r>>5]|=(t.charCodeAt(r/this.chrsz)&n)<<32-this.chrsz-r%32;return e}_safeAdd(t,e){let n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}_rol(t,e){return t<<e|t>>>32-e}_sha1Ft(t,e,n,s){return t<20?e&n|~e&s:t<40?e^n^s:t<60?e&n|e&s|n&s:e^n^s}_sha1_kt(t){return t<20?1518500249:t<40?1859775393:t<60?-1894007588:-899497514}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{start(){setInterval(()=>{let t=window.location.pathname;if(this.currentPage!==t)for(let e in this.pages)this.pages[e].url===t&&(this.pages[e].method(),this.currentPage=this.pages[e].url)},1e3)}pagesRegistration(){return this.pages={},document.querySelectorAll("a").forEach(t=>{t.getAttribute("href")&&(this.pages[t.name]={},this.pages[t.name].url=t.getAttribute("href"),this.pages[t.name].method=this[t.name],this.pages[t.name].element=t)}),this.pages}initEvents(t){t.addEventListener("click",t=>{let e=t.target;e.getAttribute("href")&&(t.preventDefault(),this.currentPage=this.pages[e.name].url,this.pages[e.name].method())},!0)}setCurrentPage(t){this.currentPage=this.pages[t].url,window.history.pushState({},"",this.pages[t].url)}getCurrentPage(){return this.currentPage}}}]);